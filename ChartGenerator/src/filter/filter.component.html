<div class="panel panel-info">
  <div class="panel-heading">{{header}}</div>
  <div class="panel-body">
    @for(filter of filters; track filter.id; let i = $index)
    {
    <div class="row" style="margin-bottom: 10px">

      <div class="col-xs-1">
        @if(i > 0)
        {
        <select class="form-control input-sm" [(ngModel)]="filter.logicalLink" (ngModelChange)="OnFilterChange()" [ngModelOptions]="{standalone: true}">
          <option value="AND">AND</option>
          <option value="OR">OR</option>
        </select>
        }
      </div>
      <div class="col-xs-1">
        @for(group of parenthesesGroups; track group.id)
        {
        <span>
          @if(isFirstInGroup(group, filter.id))
          {
          <span style="font-size: 18px; font-weight: bold;">(</span>
          }
        </span>
        }
      </div>


      <div class="col-xs-3">
        <select class="form-control input-sm" [(ngModel)]="filter.field" (ngModelChange)="OnFilterChange()" [ngModelOptions]="{standalone: true}">
          <option value="">Select column</option>
          @for(column of columns; track column)
          {
          <option [value]="column">{{column}}</option>
          }
        </select>
      </div>

      <div class="col-xs-2">
        <select class="form-control input-sm" [(ngModel)]="filter.operator" (ngModelChange)="OnFilterChange()" [ngModelOptions]="{standalone: true}">
          @for(op of filterOp; track op)
          {
          <option [value]="op">{{op}}</option>
          }
        </select>
      </div>

      <div class="col-xs-3">
        <input [type]="onlyNumber? 'number': 'text'" class="form-control input-sm" placeholder="Value" [(ngModel)]="filter.value" (ngModelChange)="OnFilterChange()" [ngModelOptions]="{standalone: true}">
      </div>

      <div class="col-xs-1">
        @for(group of parenthesesGroups; track group.id)
        {
        <span>
          @if(isLastInGroup(group, filter.id))
          {
          <span style="font-size: 18px; font-weight: bold;">)</span>
          }
        </span>
        }
      </div>
      @if(filters.length > 0)
      {
      <div class="col-xs-1" >
        <button type="button" class="btn btn-danger btn-sm" (click)="removeFilter(filter.id)">
          <span class="glyphicon glyphicon-remove"></span>
        </button>
      </div>
      }
    </div>
    }
    <div class="row" style="margin-top: 10px;">
      <div class="col-xs-1">
        <button type="button" class="btn btn-primary btn-sm" (click)="addFilter()">
          <span class="glyphicon glyphicon-plus"></span> Add Filter
        </button>
      </div>
    </div>
  </div>
</div>
